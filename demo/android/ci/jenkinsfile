@Library('mobile-pipelines@release-snapshot') _

def testEcrEndpoint = credentials('test-aws-ecr-endpoint')
def mainAgentImage = "$testEcrEndpoint/mobile-ci:base-latest"

orchestratedPipeline {
    stages = [
        'Build': { stage = 'demo/android/ci/dummyStages.groovy' },
        'BuildRelease': { stage = 'demo/android/ci/buildReleaseStages.groovy' }
    ]

    mainAgent = {
        image = mainAgentImage
        aws = {
                aws  = "aws"
                template = "mobile"
                repo = "mobile-ci"
                endpoint = testEcrEndpoint
            }
    }
}
