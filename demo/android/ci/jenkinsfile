@Library('mobile-pipelines@release-snapshot') _

def testEcrEndpoint = '953109185106.dkr.ecr.eu-west-1.amazonaws.com'
def testAwsEnvironment = {
    aws  = 'aws'
    template = 'mobile'
    repo = 'mobile-ci'
    endpoint = testEcrEndpoint
}

orchestratedPipeline {
    gitCredentialsId = 'de4d6d8f-1155-4983-b9ca-565f9d64e808'
    stages = [
        'Build': { stage = 'demo/android/ci/dummyStages.groovy' },
        'BuildRelease': { stage = 'demo/android/ci/buildReleaseStages.groovy' }
    ]

    lightAgent = {
        aws = testAwsEnvironment
    }

    mainAgent = {
        image = "$testEcrEndpoint/mobile-ci:base-latest"
        aws = testAwsEnvironment
    }
}
